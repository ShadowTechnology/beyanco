<header class="app-header">
  <div class="header-inner">

    <!-- Logo -->
    <a routerLink="/" class="brand">
      <img src="full_logo.jpg" alt="Beyanco AI" />
    </a>

    <!-- RIGHT SECTION -->
    <div class="right-section">

      <!-- Desktop Navigation -->
      <nav class="nav-links">
        <a routerLink="/home" routerLinkActive="active">Home</a>
        <a *ngIf="isLoggedIn && roles.includes('ROLE_ADMIN')"
          routerLink="/admin-dashboard"
          routerLinkActive="active">Admin</a>
        <a *ngIf="isLoggedIn"
          routerLink="/chat"
          routerLinkActive="active">Chat</a>
      </nav>

      <!-- Actions -->
      <div class="header-actions">

        <!-- ✅ CREDITS (CLICKABLE, DESKTOP ONLY) -->
        <div
          class="credits-pill desktop-only"
          *ngIf="isLoggedIn && userCredits !== null"
          [class.low]="userCredits <= 0"
          (click)="togglePopup()">
          ⚡ Credits: {{ userCredits }}
        </div>

        <!-- Profile -->
        <div class="profile-wrapper" *ngIf="isLoggedIn">
          <div class="profile-trigger" (click)="toggleProfileMenu($event)">
            <img src="/assets/favicon.png" class="profile-avatar" />
            <span class="dropdown-arrow">▾</span>
          </div>

          <div class="profile-menu" *ngIf="isProfileMenuOpen">
            <a routerLink="/profile">Profile</a>
            <a (click)="logout($event)">Logout</a>
          </div>
        </div>

        <!-- Hamburger -->
        <button
          class="hamburger"
          (click)="toggleMenu(); $event.stopPropagation()"
          [class.open]="isMobileMenuActive">
          <span></span><span></span><span></span>
        </button>

      </div>
    </div>
  </div>

  <!-- MOBILE DRAWER -->
  <div class="mobile-drawer" [class.open]="isMobileMenuActive">
    <a routerLink="/home" (click)="closeMenu()">Home</a>
    <a *ngIf="isLoggedIn && roles.includes('ROLE_ADMIN')"
      routerLink="/admin-dashboard"
      (click)="closeMenu()">Admin</a>
    <a *ngIf="isLoggedIn"
      routerLink="/chat"
      (click)="closeMenu()">Chat</a>

    <!-- Credits (MOBILE – clickable too) -->
    <div
      class="drawer-credits"
      *ngIf="isLoggedIn && userCredits !== null"
      [class.low]="userCredits <= 0"
      (click)="togglePopup(); closeMenu()">
      ⚡ Credits: {{ userCredits }}
    </div>
  </div>

  <!-- ✅ CREDIT POPUP (RESTORED) -->
  <div class="filter-card" *ngIf="isPopupOpen">
    <h3 class="filter-title">{{ count }} Photos</h3>

    <input
      type="range"
      min="1"
      max="200"
      [(ngModel)]="count"
      (input)="updatePrice()"
      class="range-slider" />

    <p class="price-text">
      Price:
      <strong class="text-danger">₹{{ totalPrice }}</strong>
    </p>

    <div class="action-area">
      <button class="buy-btn">Buy Now</button>
    </div>
  </div>
</header>
